<div class="w-full max-w-screen-md mx-auto">
  <form [formGroup]="paramsForm" (ngSubmit)="saveChanges()">
    <!-- Header -->
    <div class="flex flex-wrap gap-4 justify-between items-center mb-8">
      <div>
        <h3 class="text-xl font-semibold text-gray-200">Parámetros de Contabilización (Bodega)</h3>
        <p class="mt-1 text-sm text-gray-400">Configuración de cuentas para movimientos de bodega.</p>
      </div>
       <button 
        type="submit" 
        [disabled]="paramsForm.invalid || paramsForm.pristine || isSaving()"
        class="flex items-center justify-center min-w-[160px] gap-2 bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
        @if(isSaving()) {
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
            <span>Guardando...</span>
        } @else if(saveSuccess()) {
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
            <span>¡Guardado!</span>
        } @else {
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v1H5V4zM5 7h10v9a2 2 0 01-2 2H7a2 2 0 01-2-2V7z" /><path d="M7 9a1 1 0 000 2h6a1 1 0 100-2H7z" /></svg>
            <span>Guardar Cambios</span>
        }
      </button>
    </div>

    <!-- Main Card -->
    <div class="bg-gray-800/50 border border-gray-700/50 rounded-xl shadow-lg p-6 lg:p-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
            <div class="form-field">
                <label for="cuentaExistencias">Cuenta de Existencias</label>
                <input type="text" id="cuentaExistencias" formControlName="cuentaExistencias">
            </div>
             <div class="form-field">
                <label for="cuentaCostoVenta">Cuenta Costo de Venta</label>
                <input type="text" id="cuentaCostoVenta" formControlName="cuentaCostoVenta">
            </div>
             <div class="form-field">
                <label for="cuentaConsumoInterno">Cuenta Consumo Interno</label>
                <input type="text" id="cuentaConsumoInterno" formControlName="cuentaConsumoInterno">
            </div>

            <div class="md:col-span-2 flex items-center pt-4">
              <input id="utilizaCentroCosto" type="checkbox" formControlName="utilizaCentroCosto" class="h-4 w-4 rounded border-gray-600 bg-gray-900 text-emerald-600 focus:ring-emerald-500">
              <label for="utilizaCentroCosto" class="ml-3 block text-sm font-medium text-gray-300">Utiliza Centro de Costo en Movimientos</label>
            </div>
        </div>
    </div>
  </form>
</div>

<style>
  .form-field { @apply flex flex-col; }
  .form-field label { @apply block text-sm font-medium text-gray-400 mb-2; }
  .form-field input { @apply block w-full bg-gray-900/70 border-2 border-gray-600/80 rounded-lg shadow-sm py-2.5 px-4 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 sm:text-sm transition-all duration-200; }
  .form-field input:hover { @apply border-gray-500; }
</style>
